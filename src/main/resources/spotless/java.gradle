def license = 干.proj('license', 'supported: [apache, agpl]')
boolean setLicenseHeaderYearsFromGitHistory = 'true'.equals(project.findProperty('spotlessSetLicenseHeaderYearsFromGitHistory'))

apply plugin: 'com.diffplug.spotless'
spotless {
	if (!setLicenseHeaderYearsFromGitHistory) {
		ratchetFrom 'origin/main'
	}
	groovyGradle {
		target '*.gradle'
		clearSteps()
		greclipse()
		toggleOffOn()
	}
	java {
		licenseHeaderFile    干.file("spotless/license-${license}.java")
		eclipse().configFile 干.file('spotless/format-eclipse.xml')
		importOrder()
		removeUnusedImports()
		toggleOffOn()
	}
	if (project == rootProject) {
		groovyGradle {
			target '*.gradle', 'buildSrc/*.gradle'
		}
		toggleOffOn()
	}
}
